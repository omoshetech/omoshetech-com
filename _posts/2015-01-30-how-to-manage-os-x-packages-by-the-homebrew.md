---
layout: post
title: "Homebrew で OS X のコマンドラインツールを管理する方法"
categories: メモ
---
OS X のコマンドラインツールを管理する [Homebrew][Homebrew — The missing package manager for OS X] というパッケージマネージャーについて解説します。Mac の環境構築に関わる記事で登場することが多いツールなのでご存知の方も多いと思います。この記事では Homebrew でよく使うコマンドについても説明します。

インストール
------------

最初にインストール方法です。ターミナルを起動してください。control + space で Spotlight を起動して、"terminal" と打って起動するのが速いです。

起動したら下記のコマンドをコピー＆ペーストしてください。記事では長いため折り返して表示されていますが改行せずに1行で入力するようにしてください。Homebrew をインストールするための Ruby スクリプトをダウンロードして実行するコマンドです。

{% highlight bash %}
$ ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
{% endhighlight %}

下記の表示で止まったら Enter を入力してください。

{% highlight text %}
Press RETURN to continue or any other key to abort
{% endhighlight %}

下記の表示で止まったらログインパスワードを入力してください。なお入力しているパスワードは画面にまったく表示されないのでご注意ください。

{% highlight text %}
To proceed, enter your password, or type Ctrl-C to abort.
Password:
{% endhighlight %}

下記のようなウィンドウが表示されるのでインストール作業を行ってください。Apple が提供する開発用のコマンドラインツール群をインストールします。Xcode をインストールしているとインストール済みになり表示されないこともあります。

[![コマンドライン・デベロッパ・ツールのインストール確認ダイアログ]({{ site.baseurl }}/assets/mavericks-command-line-tools-for-xcode-install-confirmation.png){:width="380" height="153"}]({{ site.baseurl }}/assets/mavericks-command-line-tools-for-xcode-install-confirmation.png)

インストールが完了したら、下記の表示がされているターミナルで Enter を入力してください。

{% highlight text %}
Press any key when the installation has completed.
{% endhighlight %}

残りのインストール作業が実行されたのち、下記のように表示されたらインストールは完了です。

{% highlight text %}
Your system is ready to brew.
{% endhighlight %}

基本的な使い方
--------------

この手順だけ知っていれば Homebrew を使い始められます。

### パッケージの検索

パッケージがあるかどうか検索してみましょう。今回は sl コマンドを検索してみます。ls じゃないですよ。sl です。下記のようにターミナルに入力してください。

{% highlight bash %}
$ brew search sl
{% endhighlight %}

sl というキーワードを含むたくさんのパッケージが表示されます。コマンドラインツールが必要になって Homebrew からインストールできないかなと思ったらこの方法で検索してください。

### パッケージのインストール

sl というキーワードを含むたくさんのパッケージの中に sl という名前のパッケージがあります。パッケージが存在することが確認できました。それでは下記のコマンドを入力してパッケージをインストールしましょう。

{% highlight bash %}
$ brew install sl
{% endhighlight %}

ビールの絵文字が表示されたらインストール完了です。早速下記のコマンドを入力してみましょう。

{% highlight bash %}
$ sl
{% endhighlight %}

機関車のアスキーアートが表示されましたか？これが sl コマンドです。ええ、これだけです。ls を間違えて sl コマンドを打ってしまうとイライラします。不要ですね。1回で十分ですね。

### パッケージの削除

パッケージの削除の方法を説明します。下記のコマンドを入力して sl コマンドを削除しましょう。

{% highlight bash %}
$ brew remove sl
{% endhighlight %}

これで sl コマンドが削除されました。

基本的な使い方はこれだけですが、この記事後半の内容も知っておくともっと便利になるので読んでみてください。

よく使うコマンド
----------------

よく使うコマンドについて簡単に説明します。これらのコマンドを知らないともったいないです。

### install

基本的な使い方でも使用したパッケージをインストールするコマンドです。検索してパッケージがあることがわかったらこのコマンドでインストールしましょう。install の後にパッケージ名を入力して実行します。

### list

インストールされているパッケージを一覧するコマンドです。インストールされているパッケージを確認するときに使います。--versions オプションを使用することでバージョン番号付きで表示することもできます。

### remove

インストールされているパッケージを削除するコマンドです。インストールされているパッケージが不要になったときに削除するために使います。remove の後にパッケージ名を入力して実行します。

### search

パッケージが存在するかどうかを検索するコマンドです。インストールしたいパッケージの名前が推測できるときはこのコマンドでパッケージを検索できます。search の後に検索キーワードを入力して実行します。

### update

Homebrew 本体をアップデートするコマンドです。インストールできるパッケージの情報が更新されるので Homebrew を使う前に実行することをおすすめします。

知っておくと便利なコマンド
--------------------------

知っておくと便利なコマンドについて説明します。これらのコマンドを知っておくと Homebrew を使いこなしてる感があります。

### cleanup

古いバージョンのパッケージを削除するコマンドです。後述する upgrade コマンドで新しいバージョンのパッケージをインストールした後に実行するといいです。

### doctor

Homebrew が正常に動作できる環境かどうかチェックするコマンドです。Homebrew を使う前に実行することをおすすめします。pyenv など一部のパッケージと相性が悪く、正常でも警告が発生することがあるのでご注意ください。

### info

パッケージの情報を表示するコマンドです。パッケージをインストールする前にインストールオプションや注意事項を確認するときに使います。もちろんパッケージをインストールした後に再確認するために使うこともできます。

### leaves

依存関係のないパッケージの一覧を表示します。削除できそうな不要なパッケージがないか探すときに使用します。

依存関係はあるパッケージが別のパッケージを必要とする関係です。依存関係のないパッケージの一覧なので、自分が必要となって入れたパッケージ、もしくは削除したパッケージが依存していたパッケージが表示されるはずです。なので leaves で表示されるパッケージ一覧に必要でないパッケージがある場合は削除しても問題ないです。

### outdated

インストールされているパッケージで新しいバージョンのあるパッケージの一覧を表示します。アップデートできそうなパッケージがあるかどうかをチェックするときに使用します。

### upgrade

インストールされているパッケージをバージョンアップします。upgrade の後にパッケージ名を入力するとそのパッケージだけアップデートできます。

--------------------------------------------------------------------------------

Homebrew について解説しました。このブログでも Homebrew で必要なパッケージをインストールすることがあるので使いこなせるようになっておいてくださいね。

参考文献
--------

* [Homebrew — The missing package manager for OS X]

[Homebrew — The missing package manager for OS X]: http://brew.sh/
{:target="_blank"}
